<!DOCTYPE html>
<html>

<head>
    <!--Import Google Icon Font-->
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css" media="screen,projection" />
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body>

    <nav>
        <div class="nav-wrapper">
            <a href="#" class="brand-logo">Logo</a>
            <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
            <ul id="nav-top" class="right hide-on-med-and-down">
                <li><a href="/">Home</a></li>
                <li><a href="internal.html">Internal</a></li>
                <li><a href="inventory.html">Inventory</a></li>
                <li><a href="form.html">Form</a></li>
            </ul>
            <ul class="side-nav" id="mobile-demo">
                <li><a href="/">Home</a></li>
                <li><a href="internal.html">Internal</a></li>
                <li><a href="inventory.html">Inventory</a></li>
                <li><a href="form.html">Form</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <div class="row">
            <div class="col s12">
                <form id="form">
                    <div class="file-field input-field col s12">
                        <div class="btn">
                            <span>File</span>
                            <input accept="image/*" id="upload" type="file">
                        </div>
                        <div class="file-path-wrapper">
                            <input class="file-path validate" type="text">
                        </div>
                    </div>
                    <img class="col s12" id="picture" alt="Embedded Image" src="" />

                    <div class="input-field col s12">
                        <input type="text" id="category-input" class="autocomplete">
                        <label for="category-input">Kategorie</label>
                    </div>


                    <p class="col s12">
                      <input type="checkbox" class="filled-in" id="mobile" checked="checked" />
                      <label for="filled-in-box">Mobil?</label>
                    </p>

                    <button class="btn waves-effect waves-light" type="submit" name="action">Submit
                      <i class="material-icons right">send</i>
                    </button>
                </form>
            </div>
        </div>
    </div>
    <script src="/reload/reload.js"></script>
    <!--Import jQuery before materialize.js-->
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>
    <script>
        $(document).ready(function() {
            $(".button-collapse").sideNav();
        })

        var image;
        $("#upload").change(function(e) {
            console.log(e);
            var reader = new FileReader();
            var file = e.target.files[0];
            if (file) {
                console.log("has file");
                reader.readAsDataURL(file);
                reader.addEventListener("loadend", function(r) {
                    //console.log(r.target.result);
                    image = r.target.result;
                    $("#picture").attr("src", image);
                })
            }
        })

        $("#form").submit(function(e) {
            var data = {};
            data.image = image;
            data.description = "test";
            $.post("http://192.168.1.124:3000/items", data, null, "json");
        })

        $("#category-input").autocomplete({
            data: {
                "Apple": null,
                "Microsoft": null,
                "Google": 'http://placehold.it/250x250'
            }
        });
    </script>
</body>

</html>
